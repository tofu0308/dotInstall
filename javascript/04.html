<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>jQuery</title>

<style>
	body {
		margin: 10px auto;
	}

	#main {
		margin: 24px auto;
		width: 800px;
		text-align: center;
	}

	#main img {
		max-width: 640px;
	}	

	#thumb{
		width: 664px;
		margin: 0 auto;
	}	

	.thumbImg {
		max-width: 160px;
		max-height: 120px;
		margin-right: 8px;
		opacity: 0.2;
		cursor: pointer;
	}

	.current {
		opacity: 1.0;
	}

	.thumbImg:nth-child(4n+4) {
		margin-right: 0;
	}

	#nav {
		text-align: center;
	}
</style>

</head>
<body>
	<div id="thumb"></div>
	<div id="main"></div>
	<div id="nav">
		<button id="prev">&laquo; prev</button>
		<button id="next">next &raquo;</button>
	</div>



<!-- jQuery -->
<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
<script>
	$(function(){
		var files = [
			'../img/01.jpg',
			'../img/02.jpg',
			'../img/03.jpg',
			'../img/04.jpg'
		];
		var img;
		var currentNum = 0;
		//配列内の指定ファイル数だけloop
		for( var i = 0; i < files.length; i++) {
			img = $('<img>').attr('src' , files[i]).addClass('thumbImg');
			
			$('#thumb').append(img);
		}

		$('#main').append(
			$('<img>').attr('src' , files[0])
		);

		//初期表示画像のサムネにclass追加
		$('.thumbImg:first').addClass('current');

		//サムネクリック
		$('.thumbImg').click(function(){
			//mainのimg　srcにクリックされたサムネのattributeをセット
			$('#main img').attr('src' , $(this).attr('src'));
			currentNum = $(this).index();
			$(this).addClass('current').siblings().removeClass('current');
		})

		//prev
		$('#prev').click(function(){
			currentNum--;
			if(currentNum < 0){
				// マイナスになる場合は最大値（配列の最後尾）を適用
				currentNum = files.length -1;
			}

			$('#main img').attr('src' , files[currentNum]);
			$('.thumbImg').removeClass('current');
			$('.thumbImg').eq(currentNum).addClass('current')
		});

		//next
		$('#next').click(function(){
			currentNum++;
			if(currentNum > files.length -1){
				// 配列の最後尾の場合は先頭に戻る
				currentNum = 0;
			}
			$('#main img').attr('src' , files[currentNum]);
			$('.thumbImg').removeClass('current');
			$('.thumbImg').eq(currentNum).addClass('current')
		});
	});
</script>

</body>
</html>

